<!DOCTYPE html>
<html>

<head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width" />
    <title>Dot Vote</title>
    <base href="/" />
    <link href="css/bootstrap/bootstrap.min.css" rel="stylesheet" />
    <link href="css/site.css" rel="stylesheet" />
    <link href="css/bottombar.css" rel="stylesheet" />
    <link href="css/candidates.css" rel="stylesheet" />
    <link href="css/home.css" rel="stylesheet" />
    <link href="css/navbar.css" rel="stylesheet" />
</head>

<body>
    <app>Loading...</app>

    <script src="_framework/blazor.webassembly.js"></script>
    <!-- Reference the included moment.js javascript file. -->
    <script src="_content/ChartJs.Blazor/moment-with-locales.min.js" type="text/javascript" language="javascript"></script>

    <!-- Reference the included ChartJs javascript file. -->
    <script src="_content/ChartJs.Blazor/Chart.min.js" type="text/javascript" language="javascript"></script>

    <!-- This is the glue between the C# code and the ChartJs charts -->
    <script src="_content/ChartJs.Blazor/ChartJsBlazorInterop.js" type="text/javascript" language="javascript"></script>

    <!-- Some styling -->
    <link rel="stylesheet" href="_content/ChartJs.Blazor/ChartJSBlazor.css" />
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.4.1/jquery.min.js"></script>
    <script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.4.1/js/bootstrap.min.js"></script>
    <script type="text/javascript" src="https://www.gstatic.com/charts/loader.js"></script>

    <script type="text/javascript">
        var modalauth = function (callback) {

            $("#authButton").on("click", function () {
                $("#authModal").modal('show');
            });
        }

        var modalvote = function (callback) {

            $("#voteButton").on("click", function () {
                $("#voteModal").modal('show');
            });
        }
    </script>

    <script type="text/javascript">
        var selected = function (callback) {
            $('#counties').hide();
            $('#cities').hide();
            var type = document.getElementById("type");
            if (type) {
                type = type.value;
                if (type == 'Oras') {
                    $("#piechart").hide();
                    $('#cities').show();
                    window.addEventListener("resize", debounce(chart1(), 150));
                }
                else if (type == 'Localitate') {
                    $("#piechart").hide();
                    $('#counties').show();
                    window.addEventListener("resize", debounce(chart1(), 150));
                }
                else {
                    $("#piechart").show();
                    chart();
                    window.addEventListener("resize", debounce(chart(), 150));
                }
            }
            else window.addEventListener("resize", debounce(resizeContent1, 150));
        }

        var chart = function (callback) {
            var type = document.getElementById("type");
            if (type)
                type = type.value;
            else
                type = 'Tara';
            google.charts.load("visualization", "1", {
                'packages': ['corechart']
            });
            google.charts.setOnLoadCallback(drawChart);

            function drawChart() {
                if (type == 'Tara' || type == 'Oras' || type == 'Localitate' || type == 'Top 10 Candidati') {
                    var data = google.visualization.arrayToDataTable([
                        ['Candidat', 'Procente Voturi'],
                        ['Iohannis', 8],
                        ['Viorica', 3],
                        ['Ana', 4],
                        ['Bla', 3]
                    ]);
                }
                else if (type == 'Varsta 18-30' || type == 'Varsta 31-60' || type == 'Varsta 61+') {
                    var data = google.visualization.arrayToDataTable([
                        ['Sex', 'Procente Prezenta'],
                        ['Femei', 8],
                        ['Barbati', 3]
                    ]);
                }
                else if (type == 'Top 10 Orase') {
                    var data = google.visualization.arrayToDataTable([
                        ['Oras', 'Procent Prezenta Vot'],
                        ['Bucuresti', 8],
                        ['Iasi', 3],
                        ['Bucuresti', 8],
                        ['Iasi', 3],
                        ['Bucuresti', 8],
                        ['Iasi', 3],
                        ['Bucuresti', 8],
                        ['Iasi', 3],
                        ['Bucuresti', 8],
                        ['Iasi', 3]
                    ]);
                }
                var width = window.matchMedia("(max-width: 1300px) and (min-width: 920px)");
                var width1 = window.matchMedia("(max-width: 910px) and (min-width: 700px)");
                var width2 = window.matchMedia("(max-width: 699px) and (min-width: 460px)");
                var width3 = window.matchMedia("(max-width: 450px)");
                if (width.matches) {
                    var options = {
                        'backgroundColor': 'white',
                        'pieSliceBorderColor': 'white',
                        'titlePosition': 'none',
                        'width': 600,
                        'height': 400,
                        'pieSliceTextStyle': {
                            color: 'black',
                            fontSize: 18
                        },
                        'tooltip': {
                            text: 'percentage',
                            textStyle: {
                                color: 'black',
                                fontSize: 15
                            }
                        },
                        'legend': {
                            position: 'bottom',
                            textStyle: {
                                color: '#16b553',
                                fontSize: 15
                            }
                        },
                        'chartArea': {
                            left: 60,
                            top: 15,
                            width: "80px",
                            height: "100px"
                        }
                    };
                    console.log(width);
                }
                else if (width1.matches) {
                    var options = {
                        'backgroundColor': 'white',
                        'pieSliceBorderColor': 'white',
                        'titlePosition': 'none',
                        'width': 600,
                        'height': 400,
                        'pieSliceTextStyle': {
                            color: 'black',
                            fontSize: 18
                        },
                        'tooltip': {
                            text: 'percentage',
                            textStyle: {
                                color: 'black',
                                fontSize: 15
                            }
                        },
                        'legend': {
                            position: 'bottom',
                            textStyle: {
                                color: '#16b553',
                                fontSize: 15
                            }
                        },
                        'chartArea': {
                            left: '20%',
                            top: 20,
                            width: "80px",
                            height: "100px"
                        }
                    };
                }
                else if (width2.matches) {
                    var options = {
                        'backgroundColor': 'white',
                        'pieSliceBorderColor': 'white',
                        'titlePosition': 'none',
                        'width': 600,
                        'height': 400,
                        'pieSliceTextStyle': {
                            color: 'black',
                            fontSize: 18
                        },
                        'tooltip': {
                            text: 'percentage',
                            textStyle: {
                                color: 'black',
                                fontSize: 15
                            }
                        },
                        'legend': {
                            position: 'none',
                            textStyle: {
                                color: '#16b553',
                                fontSize: 15
                            }
                        },
                        'chartArea': {
                            left: 10,
                            top: 20,
                            width: "80px",
                            height: "100px"
                        }
                    };
                }
                else if (width3.matches) {
                    var options = {
                        'backgroundColor': 'white',
                        'pieSliceBorderColor': 'white',
                        'titlePosition': 'none',
                        'width': 600,
                        'height': 400,
                        'pieSliceTextStyle': {
                            color: 'black',
                            fontSize: 18
                        },
                        'tooltip': {
                            text: 'percentage',
                            textStyle: {
                                color: 'black',
                                fontSize: 15
                            }
                        },
                        'legend': {
                            position: 'none',
                            textStyle: {
                                color: '#16b553',
                                fontSize: 15
                            }
                        },
                        'chartArea': {
                            right: 300,
                            top: 20,
                            width: "40px",
                            height: "100px"
                        }
                    };
                    console.log(width3);
                }
                else
                    var options = {
                        'backgroundColor': 'white',
                        'pieSliceBorderColor': 'white',
                        'titlePosition': 'none',
                        'width': 600,
                        'height': 400,
                        'pieSliceTextStyle': {
                            color: 'black',
                            fontSize: 18
                        },
                        'tooltip': {
                            text: 'percentage',
                            textStyle: {
                                color: 'black',
                                fontSize: 15
                            }
                        },
                        'legend': {
                            position: 'bottom',
                            textStyle: {
                                color: '#16b553',
                                fontSize: 15
                            }
                        },
                        'chartArea': {
                            left: 100,
                            top: 10,
                            width: "70%",
                            height: "100px"
                        }

                    };

                var chart = new google.visualization.PieChart($('#piechart')[0]);
                chart.draw(data, options);
            }

        }

        var chart1 = function (callback) {
            $("#piechart").show();
            google.charts.load("visualization", "1", {
                'packages': ['corechart']
            });
            google.charts.setOnLoadCallback(drawChart);

            function drawChart() {
                var data = google.visualization.arrayToDataTable([
                    ['Candidat', 'Procente Voturi'],
                    ['Blaaaa', 20],
                    ['Viorica', 3],
                    ['Ana', 4],
                    ['Bla', 3]
                ]);

                var width = window.matchMedia("(max-width: 1300px) and (min-width: 920px)");
                var width1 = window.matchMedia("(max-width: 910px) and (min-width: 700px)");
                var width2 = window.matchMedia("(max-width: 699px) and (min-width: 460px)");
                var width3 = window.matchMedia("(max-width: 450px)");
                if (width.matches) {
                    var options = {
                        'backgroundColor': 'white',
                        'pieSliceBorderColor': 'white',
                        'titlePosition': 'none',
                        'width': 600,
                        'height': 400,
                        'pieSliceTextStyle': {

                            color: 'black',
                            fontSize: 18
                        },
                        'tooltip': {
                            text: 'percentage',
                            textStyle: {
                                color: 'black',
                                fontSize: 15
                            }
                        },
                        'legend': {
                            position: 'bottom',
                            textStyle: {
                                color: '#16b553',
                                fontSize: 15
                            }
                        },
                        'chartArea': {
                            left: 60,
                            top: 15,
                            width: "80px",
                            height: "100px"
                        }
                    };
                    console.log(width);
                }
                else if (width1.matches) {
                    var options = {
                        'backgroundColor': 'white',
                        'pieSliceBorderColor': 'white',
                        'titlePosition': 'none',
                        'width': 600,
                        'height': 400,
                        'pieSliceTextStyle': {
                            color: 'black',
                            fontSize: 18
                        },
                        'tooltip': {
                            text: 'percentage',
                            textStyle: {
                                color: 'black',
                                fontSize: 15
                            }
                        },
                        'legend': {
                            position: 'bottom',
                            textStyle: {
                                color: '#16b553',
                                fontSize: 15
                            }
                        },
                        'chartArea': {
                            left: '20%',
                            top: 20,
                            width: "80px",
                            height: "100px"
                        }

                    };
                }
                else if (width2.matches) {
                    var options = {
                        'backgroundColor': 'white',
                        'pieSliceBorderColor': 'white',
                        'titlePosition': 'none',
                        'width': 600,
                        'height': 400,
                        'pieSliceTextStyle': {
                            color: 'black',
                            fontSize: 18
                        },
                        'tooltip': {
                            text: 'percentage',
                            textStyle: {
                                color: 'black',
                                fontSize: 15
                            }
                        },
                        'legend': {
                            position: 'none',
                            textStyle: {
                                color: '#16b553',
                                fontSize: 15
                            }
                        },
                        'chartArea': {
                            left: 10,
                            top: 20,
                            width: "80px",
                            height: "100px"
                        }
                    };
                }
                else if (width3.matches) {
                    var options = {
                        'backgroundColor': 'white',
                        'pieSliceBorderColor': 'white',
                        'titlePosition': 'none',
                        'width': 600,
                        'height': 400,
                        'pieSliceTextStyle': {
                            color: 'black',
                            fontSize: 18
                        },
                        'tooltip': {
                            text: 'percentage',
                            textStyle: {
                                color: 'black',
                                fontSize: 15
                            }
                        },
                        'legend': {
                            position: 'none',
                            textStyle: {
                                color: '#16b553',
                                fontSize: 15
                            }
                        },
                        'chartArea': {
                            right: 300,
                            top: 20,
                            width: "40px",
                            height: "100px"
                        }
                    };
                    console.log(width3);
                }
                else
                    var options = {
                        'backgroundColor': 'white',
                        'pieSliceBorderColor': 'white',
                        'titlePosition': 'none',
                        'width': 600,
                        'height': 400,
                        'pieSliceTextStyle': {
                            color: 'black',
                            fontSize: 18
                        },
                        'tooltip': {
                            text: 'percentage',
                            textStyle: {
                                color: 'black',
                                fontSize: 15
                            }
                        },
                        'legend': {
                            position: 'bottom',
                            textStyle: {
                                color: '#16b553',
                                fontSize: 15
                            }
                        },
                        'chartArea': {
                            left: 100,
                            top: 10,
                            width: "70%",
                            height: "100px"
                        }
                    };

                var chart = new google.visualization.PieChart($('#piechart')[0]);
                chart.draw(data, options);
            }

        }

        function debounce(func, time) {
            var time = time || 100;
            var timer;
            return function (event) {
                if (timer) clearTimeout(timer);
                timer = setTimeout(func, time, event);
            };
        }
    </script>
</body>

</html >
